@model FxtDataAcquisition.NHibernate.Entities.DATBuilding
@{
    Layout = null;
    int type = ViewBag.type;
    string path = System.Configuration.ConfigurationManager.AppSettings["OssDownload"];
}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" style="overflow:hidden; ">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    @*设置浏览器IE文本模式为最高版本*@
    </meta>
    <title>无纸化住宅物业信息采集系统</title>
    <meta name="keywords" content="无纸化住宅物业信息采集系统" />
    <meta name="description" content="无纸化住宅物业信息采集系统" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- basic styles -->
    <link href="/bootstrap/ace1.2/assets/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="/bootstrap/ace1.2/assets/css/font-awesome.min.css" />
    <!--[if IE 7]>
      <link rel="stylesheet" href="/bootstrap/ace1.2/assets/css/font-awesome-ie7.min.css" />
    <![endif]-->
    <!-- page specific plugin styles -->
    <!-- fonts -->
    @*<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,300" />*@
    <!-- ace styles -->
    <link rel="stylesheet" href="/bootstrap/ace1.2/assets/css/ace.min.css" />
    <link rel="stylesheet" href="/bootstrap/ace1.2/assets/css/ace-rtl.min.css" />
    <link rel="stylesheet" href="/bootstrap/ace1.2/assets/css/ace-skins.min.css" />
    <!--[if lte IE 8]>
      <link rel="stylesheet" href="/bootstrap/ace1.2/assets/css/ace-ie.min.css" />
    <![endif]-->
    @*fancybox弹出框效果start*@
    <link href="/Scripts/jquery.fancybox-1.3.4/fancybox/jquery.fancybox-1.3.4.css" type="text/css" rel="Stylesheet" />
    @*下拉框效果插件*@
    <link rel="stylesheet" href="/bootstrap/ace1.2/assets/css/chosen.css" />
    <link type="text/css" rel="Stylesheet" href="/Css/AllotFlowInfo/EditBuilding.css?s=s" />

    @*fancybox弹出框效果end*@
    <!-- inline styles related to this page -->
    <!-- ace settings handler -->
    <script src="/bootstrap/ace1.2/assets/js/ace-extra.min.js"></script>
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/bootstrap/ace1.2/assets/js/html5shiv.js"></script>
    <script src="/bootstrap/ace1.2/assets/js/respond.min.js"></script>
    <![endif]-->
    <!-- basic scripts -->
    <!--[if !IE]> -->
    @*<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>*@
    <!-- <![endif]-->
    <!--[if IE]>
    @*<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>*@
    <![endif]-->
    <!--[if !IE]> -->
    <script type="text/javascript">
        window.jQuery || document.write("<script src='/bootstrap/ace1.2/assets/js/jquery-1.10.2.min.js'>" + "<" + "script>");
    </script>

    <!-- <![endif]-->
    <!--[if IE]>
    <script type="text/javascript">
     window.jQuery || document.write("<script src='/bootstrap/ace1.2/assets/js/jquery-1.10.2.min.js'>"+"<"+"script>");
    </script>
    <![endif]-->
    <script type="text/javascript">
        if ("ontouchend" in document) document.write("<script src='/bootstrap/ace1.2/assets/js/jquery.mobile.custom.min.js'>" + "<" + "script>");
    </script>
    <script type="text/javascript" src="/Scripts/jquery-migrate-1.1.1.js"></script>
    <script src="/bootstrap/ace1.2/assets/js/bootstrap.min.js"></script>
    <script src="/bootstrap/ace1.2/assets/js/typeahead-bs2.min.js"></script>
    <!-- page specific plugin scripts -->
    <!--[if lte IE 8]>
      <script src="/bootstrap/ace1.2/assets/js/excanvas.min.js"></script>
    <![endif]-->
    <script src="/bootstrap/ace1.2/assets/js/jquery-ui-1.10.3.custom.min.js"></script>
    <script src="/bootstrap/ace1.2/assets/js/jquery.ui.touch-punch.min.js"></script>
    <script src="/bootstrap/ace1.2/assets/js/jquery.slimscroll.min.js"></script>
    @*饼图*@
    <script src="/bootstrap/ace1.2/assets/js/jquery.easy-pie-chart.min.js"></script>
    @*走势图*@
    <script src="/bootstrap/ace1.2/assets/js/jquery.sparkline.min.js"></script>
    <!-- ace scripts -->
    <script src="/bootstrap/ace1.2/assets/js/ace-elements.min.js"></script>
    <script src="/bootstrap/ace1.2/assets/js/ace.min.js"></script>
    <script src="/bootstrap/bootstrap-paginator/bootstrap-paginator-1.0.2.js" type="text/javascript"></script>
    @*下拉框效果插件*@
    <script src="/bootstrap/ace1.2/assets/js/chosen.jquery.min.js"></script>
    <!-- inline scripts related to this page -->
    <script type="text/javascript">
        jQuery(function ($) {

        })
    </script>
    @*fancybox弹出框效果start*@
    <script src="/Scripts/jquery.fancybox-1.3.4/fancybox/jquery.fancybox-1.3.4.js" type="text/javascript"></script>
    @*fancybox动画效果(可选)*@
    <script src="/Scripts/jquery.fancybox-1.3.4/fancybox/jquery.easing-1.3.pack.js" type="text/javascript"></script>
    @*fancybox鼠标滚轮滚动效果(可选)*@
    <script src="/Scripts/jquery.fancybox-1.3.4/fancybox/jquery.mousewheel-3.0.4.pack.js" type="text/javascript"></script>
    @*fancybox弹出框效果end*@
    @*loadShow效果start*@
    <script src="/Scripts/jquery.blockUI.1.33/jquery.blockUI-1.33.js" type="text/javascript"></script>
    @*loadShow效果end*@
    <script type="text/javascript">
        window.BMap_loadScriptTime = (new Date).getTime();
        @*document.write('<script type="text/javascript" src="https://api.map.baidu.com/getscript?v=1.3&ak=&services=true&t=20150527115231"></script>');
        document.write('<link rel="stylesheet" type="text/css" href="https://api.map.baidu.com/res/13/bmap.css"/>');*@
    </script>
    <script type="text/javascript" src="https://api.map.baidu.com/getscript?v=1.3&ak=&services=true&t=20150527115231"></script>
    <link rel="stylesheet" type="text/css" href="https://api.map.baidu.com/res/13/bmap.css" />
    <script src="/Scripts/Common/UrlCommon.js" type="text/javascript"></script>
    <script src="/Scripts/Common/CodeJson.js?s=s" type="text/javascript"></script>
    <script src="/Scripts/jquery.extend.js" type="text/javascript"></script>
    <script src="/Scripts/Common/Common.js?a=s" type="text/javascript"></script>
    <script type="text/javascript" src="/Scripts/AllotFlowInfo/EditBuilding.js?d=fddf"></script>
    <script src="/Scripts/My97DatePicker/WdatePicker.js" type="text/javascript"></script>
</head>
<body xmlns="http://www.w3.org/1999/xhtml">
    <div class="page-content" style="padding-bottom:0px;">
        <div class="tabbable">
            <ul class="nav nav-tabs padding-12 tab-color-blue background-blue" id="myTab4">
                <li class="@if(type==0){@("active")}">
                    <a data-toggle="tab" href="#home4">楼栋信息</a>
                </li>

                <li class="@if(type==1){@("active")}" id="dropdown_photo">
                    <a data-toggle="tab" href="#profile4">照片(@ViewBag.PhotoCount)</a>
                </li>

                <li class="" id="dropdown_map">
                    <a data-toggle="tab" href="#dropdown14">定位(<font id="dingwei"></font>)</a>
                </li>
            </ul>

            <div class="tab-content" id="SubmitPanel" style="float:left; width:890px;height:535px; overflow-y:auto;">
                <div id="home4" class="tab-pane @if(type==0){@("active")}">
                    <table id="sample-table-1" class="table table-striped table-bordered table-hover">
                        <thead style="display:none;">
                            <tr>
                                <th>Domain</th>
                                <th>Price</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div class="form-group diy_form-group">
                                        <label class="col-sm-3  no-padding-right diy_fromlabel">楼栋名称<span style="color:red">*</span></label>
                                        <div class="col-sm-9 diy_fromdiv">
                                            <input type="text" value="@Model.BuildingName" id="txt_buildingname" class="datbuilding" />
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="form-group diy_form-group">
                                        <label class="col-sm-3  no-padding-right diy_fromlabel">楼栋别称</label>
                                        <div class="col-sm-9 diy_fromdiv">
                                            <input type="text" value="@Model.OtherName" id="txt_othername" class="datbuilding" />
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="form-group diy_form-group">
                                        <label class="col-sm-3  no-padding-right diy_fromlabel">总层数<span style="color:red">*</span></label>
                                        <div class="col-sm-9 diy_fromdiv">
                                            <input type="text" id="txt_totalfloor" class="datbuilding" value="@(Model.TotalFloor == null ? "" : Model.TotalFloor.ToString())" />
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="form-group diy_form-group">
                                        <label class="col-sm-3  no-padding-right diy_fromlabel">建筑结构</label>
                                        <div class="col-sm-9 diy_fromdiv">
                                            <select id="txt_structurecode" class="datbuilding">
                                                <option value="">-请选择-</option>
                                            </select>
                                            <input type="hidden" id="hdStructureCode" value="@(Convert.ToInt32(Model.StructureCode))" />
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="form-group diy_form-group">
                                        <label class="col-sm-3  no-padding-right diy_fromlabel">位置</label>
                                        <div class="col-sm-9 diy_fromdiv">
                                            <select id="txt_locationcode" class="datbuilding">
                                                <option value="">-请选择-</option>
                                            </select>
                                            <input type="hidden" id="hdLocationCode" value="@(Convert.ToInt32(Model.LocationCode))" />
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="form-group diy_form-group">
                                        <label class="col-sm-3  no-padding-right diy_fromlabel">楼栋用途<span style="color:red">*</span></label>
                                        <div class="col-sm-9 diy_fromdiv">
                                            <select id="txt_purposecode" class="datbuilding">
                                                <option value="0">-请选择-</option>
                                                @foreach (FxtDataAcquisition.Domain.Models.SYSCode code in ViewBag.PurposeCode)
                                                {
                                                    <option value="@code.Code" @(code.Code == Model.PurposeCode ? " selected=\"selected\"" : "")=)>@code.CodeName</option>
                                                }
                                            </select>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="form-group diy_form-group">
                                        <label class="col-sm-3  no-padding-right diy_fromlabel">是否带电梯<span style="color:red">*</span></label>
                                        <div class="col-sm-9 diy_fromdiv">
                                            <select id="txt_iselevator" class="datbuilding">
                                                <option value="">-请选择-</option>
                                                <option value="0" @(Model.IsElevator == 0 ? "selected=\"selected\"" : "")=)>否</option>
                                                <option value="1" @(Model.IsElevator == 1 ? "selected=\"selected\"" : "")=)>是</option>
                                            </select>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="form-group diy_form-group">
                                        <label class="col-sm-3  no-padding-right diy_fromlabel">梯户数</label>
                                        <div class="col-sm-9 diy_fromdiv">
                                            <input type="text" value="@Model.ElevatorRate" id="txt_elevatorrate" class="datbuilding" />
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="form-group diy_form-group">
                                        <label class="col-sm-3  no-padding-right diy_fromlabel">建筑时间</label>
                                        <div class="col-sm-9 diy_fromdiv">
                                            <input type="text" value="@(Model.BuildDate == null ? "" : Convert.ToDateTime(Model.BuildDate).ToString("yyyy-MM-dd"))" id="txt_builddate" onfocus="WdatePicker()" class="datbuilding" />
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="form-group diy_form-group">
                                        <label class="col-sm-3  no-padding-right diy_fromlabel">维护情况<span style="color:red">*</span></label>
                                        <div class="col-sm-9 diy_fromdiv">
                                            <select id="txt_maintenancecode" class="datbuilding">
                                                <option value="0">-请选择-</option>
                                                @foreach (FxtDataAcquisition.Domain.Models.SYSCode code in ViewBag.MaintenanceCode)
                                                {
                                                    <option value="@code.Code" @(code.Code == Model.MaintenanceCode ? " selected=\"selected\"" : "")=)>@code.CodeName</option>
                                                }
                                            </select>
                                        </div>
                                    </div>
                                </td>
                                <td colspan="2">
                                    <div class="form-group diy_form-group">
                                        <label class="col-sm-3  no-padding-right diy_fromlabel">备注</label>
                                        <div class="col-sm-9 diy_fromdiv">
                                            <textarea style="width:400px" id="txt_remark" class="datbuilding">@Model.Remark</textarea>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    @if (ViewBag.IsUpdateRight == 1)
                    {
                        <div class="clearfix form-actions diy_form-actions">
                            <div class="col-md-offset-3 col-md-9 col-sm-3">
                                <input class="btn btn-info" type="button" value="保存" id="btnSubmit" />
                            </div>
                        </div>
                    }
                </div>

                <div id="profile4" class="tab-pane @if(type==1){@("active")}">
                    <button class="btn btn-sm btn-success" style="margin:10px 0px 10px 10px" onclick="UploadBuildingImage(@Model.ProjectId,@Model.BuildingId)">上传图片</button>
                    <button class="btn btn-sm btn-danger" style="margin:10px 10px 10px 0px" onclick="DeleteBuildingImage(@Model.ProjectId,@Model.BuildingId)">删除图片</button>
                    <ul class="list-unstyled" id="projPhotoList">
                        @foreach (FxtDataAcquisition.Domain.Models.PPhoto obj in ViewBag.PhotoList)
                        {
                            <li>
                                <span><a class="projPhoto" href="@path@obj.Path"><img src="@path@obj.Path" /></a></span>
                                <span data-code="@(Convert.ToInt32(obj.PhotoTypeCode))" class="photoTypeName photoTypeName_@(Convert.ToInt32(obj.PhotoTypeCode))"></span>
                                <label class="cbPanel" style="float:right;padding-top: 3px">
                                    <input type="checkbox" name="ids" class="ace cb_select" value="@obj.Id" />
                                    <span class="lbl"></span>
                                </label>
                            </li>
                        }
                    </ul>
                </div>

                <div id="dropdown14" class="tab-pane">
                    <div id="MapPointBtn">
                        <button class="btn btn-xs mapBtn btn-white" id="btnUserPoint" style="display:none;">查勘员位置</button>
                        <button class="btn btn-xs mapBtn" id="btnHousePoint">物业位置</button>
                        <span>
                            查看周边：
                            <select id="searchAroundMap">
                                <option>请选择 </option>
                                <option>医院</option>
                                <option>银行</option>
                                <option>中学</option>
                                <option>小学</option>
                                <option>幼儿园 </option>
                                <option>商场</option>
                                <option>菜市场 </option>
                                <option>邮局</option>
                                <option>社康</option>
                                <option>会所</option>
                                <option>运动场所 </option>
                                <option>公交站 </option>
                                <option>地铁</option>
                            </select>
                        </span>&nbsp;
                        <button class="btn btn-xs mapBtn" id="btnlocation">开始定位</button>
                        <button class="btn btn-xs mapBtn" id="btnSavelocation">保存定位</button>
                    </div>
                    <div style="float:left; width:100%;height:375px; overflow:hidden;" id="mapContent">

                    </div>
                </div>
            </div>
        </div>

        <div class="page-header" style="display:none;">
            <h1>
                <a href="javascript:;">楼盘信息</a>|
                <a href="javascript:;">照片(0)</a>|
                <a href="javascript:;">定位</a>
            </h1>
        </div><!-- /.page-header -->

        <div class="row" style="display:none;">
            <!-- /.col -->
        </div><!-- /.row -->
    </div>
    <input type="hidden" id="hdCityId" value="@ViewBag.CityId" />
    <input type="hidden" id="hdProvinceId" value="@ViewBag.ProvinceId" />
    <input type="hidden" id="hdIsUpdateRight" value="@ViewBag.IsUpdateRight" />
    <input type="hidden" id="hdBuildingId" value="@ViewBag.BuildingId" />
    <input type="hidden" id="hdHouseX" value="@ViewBag.HouseX" />
    <input type="hidden" id="hdHouseY" value="@ViewBag.HouseY" />
    <input type="hidden" id="hdAllotId" value="@ViewBag.AllotId" />
    <input type="hidden" id="hdProjectId" value="@ViewBag.hdProjectId" />
</body>
</html>
