@{
    ViewBag.Title = "Menus";
    Layout = "~/Views/Shared/_LayoutUsers.cshtml";
}

<div class="portlet box light-grey">
    <div class="portlet-title">
        <div class="caption">
            <i class="icon-globe"></i>菜单列表</div>
        <div class="actions">
            <a class="btn green" href="#" 
                data-title="新增" 
                data-type="c"
                data-url="/Users/AddMenus">
                <i class="icon-pencil"></i>新增
            </a>
        </div>
        <div class="tools" style="padding-right: 8px;">
            <a href="javascript:;" class="reload"></a>
        </div>
    </div>
    <div class="portlet-body">
        <div class="form-inline">
            <div class="table-scrollable">
                <table class="table table-striped table-hover table-bordered dataTable" id="list">
                    <thead>
                        <tr>
                            <th scope="col" style="width: 450px !important">
                                名称
                            </th>
                            <th>
                                链接地址
                            </th>
                            <th>
                                创建时间
                            </th>
                            <th>
                                操作
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
            <div class="row">
                <div class="col-md-5 col-sm-12">
                    <div id="page_info" class="dataTables_info">
                    </div>
                </div>
                <div class="col-md-7 col-sm-12">
                    <div class="dataTables_paginate paging_bootstrap">
                        <ul class="pagination">
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $.ActionSelectList = [
    { name: 'productid',
        url: '/Users/ProductList',
        val: 'ProductName',
        children: { name: 'parentid', url: '/Users/GetMenusByProductId/?productid={0}', val: 'MenuName' }
    }];
    $.ActionListExpanDetails({
        tourl: "/Users/GetMenuList"
    });
    $.ActionOperta({
        toid: ".actions",
        ActionFormId: "#formmenus",
        ActionFormRules: $.menurules,
        ReloadUrl: '/Users/Menus'
    });
</script>
<script id="template" type="text/x-jquery-tmpl">
    <tr data-id="${Id}">
        <td scope="col" style="width: 450px !important">${MenuName}</td>
        <td scope="col" style="width: 200px !important">${Url}</td>
        <td scope="col" style="width: 200px !important">${$item.dataFromat("yyyy-MM-dd")}</td>
        <td>
            <a class="btn"
               url="/Users/DelMenu/?id=${Id}" 
               data-type="d"
               data-rloadurl='/Users/Menus'>
               删除
               </a>
            <a class="btn"
               url="/Users/GetMenus/?id=${Id}"
               data-url="/Users/UpdateMenus/"
               data-type="u"
               data-title='修改'
               data-formid='#formmenus'
               data-rules='$.menurules'
               data-rloadurl='/Users/Menus'>
                修改
            </a>
        </td>
    </tr>
</script>
<div id="Expand_Details" style="display:none"></div>
<script id="template-form" type="text/x-jquery-tmpl">
<div class="row">
    <div class="col-md-12">
        <div class="portlet-body form">
            <div class="form-body">
                <!-- BEGIN FORM-->
                <form id="formmenus" action="" class="form-horizontal">
                <input type="hidden" name="id"/>
                <div class="alert alert-error display-hide">
                    <button class="close" data-dismiss="alert">
                    </button>
                    <span>输入有错误,请检查.</span>
                </div>
                <div class="alert alert-success display-hide">
                    <button class="close" data-dismiss="alert">
                    </button>
                    <span>验证成功!</span>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-3">
                        所属产品<span class="required">*</span></label>
                    <div class="col-md-4">                        
                        <select class="form-control" name="productid">
                             <option value="0">-请选择-</option>
                         </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-3">
                        父级菜单&nbsp;&nbsp;</label>
                    <div class="col-md-4">
                            <select class="form-control" name="parentid">
                                    <option value="">-请选择-</option>
                            </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-3">
                        菜单名称<span class="required">*</span></label>
                    <div class="col-md-4">
                        <input type="text" name="menuname" data-required="1" class="form-control" />                        
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-md-3">
                        菜单链接<span class="required">*</span></label>
                    <div class="col-md-4">
                        <input type="text" name="url" data-required="1" class="form-control" />
                    </div>
                </div>                
                <div class="form-actions fluid">
                    <div class="col-md-offset-3 col-md-9">
                        <button type="submit" class="btn green">
                            提交</button>
                        <button type="button" class="btn default">
                            取消</button>
                    </div>
                </div>
                </form>
                <!-- END FORM-->
            </div>
        </div>
        <!-- END VALIDATION STATES-->
    </div>
</div>
</script>