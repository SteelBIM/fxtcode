<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link href="Styles/webuploader.css" rel="stylesheet" type="text/css" />
    <link href="Styles/style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript">

        window.console = window.console || (function () {
            var c = {}; c.log = c.warn = c.debug = c.info = c.error = c.time = c.dir = c.profile
            = c.clear = c.exception = c.trace = c.assert = function () { };
            return c;
        })();
    </script>
</head>
<body>
    
    <div id="wrapper" style="height:400px">
        
        <div id="container" style="border:0;">
            <!--头部，相册选择和格式选择-->
             
            <div id="uploader">
                <input type="hidden" id="resid" value="0" />
                <div style="height:30px;font-size:16px;padding-bottom:10px;padding-left:25px;">资源类型:<select id="modular" style="height:30px; width:100px;"></select>&nbsp;&nbsp;资源名称:<input id="resName" style="border:#808080 1px solid;width:300px; height:30px;" type="text" /><br/>强制更新:<input id="isForce" type="checkbox" /></div>
                <div class="queueList">
                    <div id="dndArea" class="placeholder">
                        <div id="filePicker">
                        </div>
                        <p>
                            <!--如果上传的是照片，可将照片拖到这里，单次最多可选300张-->
                        </p>
                    </div>
                </div>
                <form action="/fileupload.ashx.cs" method="post" enctype="multipart/form-data">
                    <div class="statusBar" style="display: none;">
                        <div class="progress">
                            <span class="text">0%</span> <span class="percentage"></span>
                        </div>
                        <div class="info">
                        </div>
                        <div class="btns">
                            <div id="filePicker2">
                            </div>
                            <div class="uploadBtn">
                                开始上传
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src="Scripts/jquery.js" type="text/javascript"></script>
    <script src="Scripts/md5.js" charset="utf-8"></script>
    <script src="Scripts/webuploader.js" type="text/javascript"></script>
    <script src="Scripts/upload.js" type="text/javascript"></script>
    <script>
        function getModular() {
            $.post("/ResourceTypeConfig/GetAllResourceTypes", {}, function (data) {
                $(data).each(function () {
                    $("#modular").append('<option value=' + this.ModularID + '>' + this.ModularName + '</option>')
                })
            })
        }
        $(function () {
            getModular();
            var resid = window.location.href.split('?')[1].split('=')[1];
            $("#resid").val(resid);
            setDefaultValue(resid);
        })

        var resid = 0;

        function setDefaultValue(resId) {
            if (resId > 0) {
                $.post("/ResourceMgrFiles/GetResByID", { resId: resId }, function (data) {
                    if (data) {
                        $("#modular").val(data.ModularID);
                        $("#resName").val(data.ResName);
                        $("#isForce").attr("checked", data.IsForce==1);
                    }
                })
            }
        }
    </script>
</body>
</html>
