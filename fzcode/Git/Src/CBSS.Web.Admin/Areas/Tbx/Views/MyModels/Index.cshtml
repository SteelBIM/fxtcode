@using CBSS.Web
@using CBSS.Tbx.Contract.DataModel
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model  Model
<style>
    .row1 {
        margin-left: 30px;
    }

        .row1 label {
            margin-bottom: 0;
            width: 150px;
        }

        .row1 .form-group {
            margin-bottom: 15px;
        }
</style>
<div id="toolbar" class="input-group" style="float: left;margin-top: 0;margin-bottom: 0;">
    <button style="background-color:#808080;color:#fff; border-color: #F7C727; border-radius:5px;" onclick="AddParent()" type="button" class="btn btn-default"><span class="glyphicon glyphicon-export" aria-hidden="true"></span>+新增顶级分类 </button>
</div>
<div class="panel-body" style="padding-bottom:0px;">
    <table id="tb_model"></table>
</div>

<input type="hidden" id="serverUrl" value="@Url.Action("GetModelJson")" />
<input type="hidden" id="getModel" value="@Url.Action("GetModelByModelID")" />
<input type="hidden" id="delUrl" value="@Url.Action("GetDelModelByModelID")" />

<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display:none;">
    <div class="modal-dialog">
        <div class="portlet-body form-horizontal form-bordered form-row-stripped">
            <form action="@Url.Action("Submit")" method="post" class="form-horizontal" role="form" id="formEdit" enctype="multipart/form-data">
                <input type="hidden" name="ModelID" id="ModelID" />
                <input type="hidden" name="ParentID" id="ParentID" />
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title" id="myModalLabel">编辑模型</h4>
                </div>
                <div class="modal-body">
                    <div class="row row1">
                        <div class="control-group">
                            <label class="control-label"><span class="required">*</span>模型名称：</label>
                            <div class="controls">
                                @Html.TextBoxFor(m => m.ModelName, new { @class = "m-wrap small", @style = "min-width:205px;" })
                                <span class="help-inline">@Html.ValidationMessageFor(m => m.ModelName)</span>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label"><span class="required">*</span>排序：</label>
                            <div class="controls">
                                @Html.TextBoxFor(m => m.Sort, new { @class = "m-wrap small" })
                                <span class="help-inline">@Html.ValidationMessageFor(m => m.Sort)</span>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">模型功能：</label>
                            <div class="controls">
                                @Html.DropDownList("FunctionID")
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">资源模板：</label>
                            <div class="controls">
                                @Html.TextBoxFor(m => m.ResourceTemplate, new { @class = "m-wrap small" })
                                <input type="file" id="ResourceTemplate" name="ResourceTemplate" style="border:0px solid red; width:75px;" onchange="$('#ResourceTemplate').val($(this).val())" />
                                <a href="javascript:alert('下载资源模板')">下载模板</a>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">模型资源分类：</label>
                            <div class="controls">
                                @Html.DropDownList("ModelType")
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">模型分类：</label>
                            <div class="controls">
                                @Html.DropDownList("ModelSourceType")
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">是否启用：</label>
                            <div class="controls">
                                <label style="cursor:pointer; float:left; margin-top:3px; margin-left:6px;" for="start">@Html.RadioButtonFor(model => model.Status, 1, new { @id = "start", @name = "Status", @checked = true })启用</label>
                                <label style="cursor:pointer;margin-top:3px; margin-left:6px; float:left;" for="forbidden">@Html.RadioButtonFor(model => model.Status, 2, new { @id = "forbidden", @name = "Status" })禁用</label>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" onclick="submitForm()" class="btn btn-primary" id="btn_editSave">保存</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button> 
                </div>
            </form>
        </div>
    </div>
</div>

@section PageSpecificJavascriptIncludes{
    <link href="~/Content/Scripts/bootstrap-table-develop/src/bootstrap-table.css" rel="stylesheet" />
    <script src="~/Content/Scripts/bootstrap-table-develop/src/bootstrap-table.js"></script>
    <script src="~/Content/Scripts/bootstrap-table-develop/src/locale/bootstrap-table-zh-CN.js"></script>
    <script src="~/Assets/pages/Model.js"></script>
    <script>
        $(function () {
            oTableInit.Init();
        }); 
    </script>

}
