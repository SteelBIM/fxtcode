@using CBSS.Web
@using CBSS.Framework.Contract
@using CBSS.Tbx.Contract.DataModel
@using CBSS.Framework.Web.Controls
@model PagedList<ModelImgLibrary>
@{
    ViewBag.Title = "图片库";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section PageSpecificJavascriptIncludes{
    <meta name="noreferer" content="http://tbxcdn.kingsun.cn">
    <link href="~/Content/Scripts/bootstrap-table-develop/src/bootstrap-table.css" rel="stylesheet" />
    <script src="~/Content/Scripts/bootstrap-table-develop/src/bootstrap-table.js"></script>
    <script src="~/Content/Scripts/bootstrap-table-develop/src/locale/bootstrap-table-zh-CN.js"></script>
    <script src="~/Assets/pages/ModelImgLibrary.js?v1.2"></script>
    <script type="text/javascript">  
        var ModelID='@Request.RequestContext.RouteData.Values["id"]';
        $(document).ready(function () {
            addcloud();
            var oTable = new ModelImgLibraryTableInit();
            oTable.Init(ModelID);
        });
        function DelModelClick(ModelImgLibraryID, ModelID) {
            if (confirm("您确定要删除吗？")) {
                $.post("/ModelImgLibrary/Delete", { ModelImgLibraryID: ModelImgLibraryID, ModelID: ModelID }, function (data) {
                    alert(data);
                    if (data) {
                        window.location.reload();
                    }
                });
            }
        }
    </script>
}
<div class="row-fluid">
    <div class="span4">
        <div style=" margin-bottom:12px;">
           <a class="btn red" id="deletes" href="javascript:;">删除 <i class="icon-trash icon-white"></i></a>
            <a class="btn green thickbox" title='添加图片' href="@Url.Action("Create")?ModelID=@Request.RequestContext.RouteData.Values["id"]&TB_iframe=true&height=520&width=800">新增 <i class="icon-plus icon-white"></i></a>
        </div>
    </div>
</div>
<table class="table table-striped table-hover" id="tb_roletable"></table>
@*<div class="row-fluid">
        <div class="span4">
            <div>
                <a class="btn green thickbox" title='上传图片' href="@Url.Action("Create", new { id = Request.RequestContext.RouteData.Values["id"]})?TB_iframe=true&height=600&width=700">上传图片 <i class="icon-plus icon-white"></i></a>
            </div>
        </div>
        <div class="span8" style="margin-bottom: 20px;">

            <div class="dataTables_filter">
                <label>
                    模型名称: @(ViewData["ModelName"] != null ? (ViewData["ModelName"] as Model).ModelName : "")
                </label>
            </div>
        </div>
    </div>
    @using (Html.BeginForm("Delete", "Model", FormMethod.Post, new { id = "mainForm" }))
    {
        <table class="table table-striped table-hover ">
            <thead>
                <tr>
                    <th style="width: 8px;">
                            <input type="checkbox" id="checkall" class="group-checkable" />
                        </th>
                    <th>
                        图片名称
                    </th>
                    <th>
                        图片格式
                    </th>
                    <th>
                        图片路径
                    </th>
                    <th>
                        发布时间
                    </th>
                    <th>
                        操作
                    </th>
                </tr>
            </thead>
            <tbody>
                @foreach (var m in Model)
                {
                    <tr>
                        <td>
                                <input type="checkbox" class="checkboxes" name='ids' value='@m.AppID' />
                            </td>
                        <td>
                            @m.ImgName
                        </td>
                        <td>
                            @(CBSS.Core.Utility.EnumHelper.GetEnumDesc<CBSS.Framework.Contract.Enums.ImgTypeEnum>(m.ImgType))
                        </td>
                        <td>
                            @m.ImgPath
                        </td>
                        <td>
                            @m.CreateDate.ToString("yyyy-MM-dd HH:mm:ss")
                        </td>
                        <td>
                            <a class="btn mini purple thickbox" title='编辑' href="@Url.Action("Edit", new { id = m.ModelImgLibraryID })?TB_iframe=true&height=520&width=600">
                                <i class="icon-edit"></i>
                                编辑
                            </a>
                            <a class="btn mini purple" title='删除' onclick="DelModelClick(@m.ModelImgLibraryID,@Request.RequestContext.RouteData.Values["id"])" href="javascript:void(0)">
                                <i class="icon-del"></i>
                                删除
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }*@ 
@*<div class="dataTables_paginate paging_bootstrap pagination">
        @Html.Pager(Model, new PagerOptions() { ShowTotalItemCount = true })
    </div>*@
