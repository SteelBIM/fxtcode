@using Webdiyer.WebControls.Mvc
@using FXT.DataCenter.Domain.Models
@model PagedList<Dat_WaitProject>
@section JavaScript{
    <script type="text/javascript">
        function js_method() {
            alert("abc");
        };
    </script>
}
<table class="table table-striped table-hover ">
    <thead>
        <tr>
            <th style="width: 8px;">
                <input type="checkbox" id="checkall" class="group-checkable" />
            </th>
            <th>待建楼盘名称
            </th>
            <th>创建时间
            </th>
            <th>操作
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @if (Model != null)
        {
            foreach (var m in Model)
            {
                var chValue = m.FxtCompanyId + "#" + m.WaitProjectId;
            <tr>
                <td>
                    <input type="checkbox" class="checkboxes" name='ids' value='@m.WaitProjectId' />
                </td>
                <td>
                    @m.WaitProjectName
                </td>
                <td>
                    @if (m.CreateDate != null)
                    {
                        @m.CreateDate.Value.ToString("yyyy-MM-dd")
                    }
                </td>
                <td>
                    <a class="btn mini purple thickbox" title='编辑楼盘别名'  href="@Url.Action("Edit", new { id = m.WaitProjectId })?TB_iframe=true&height=250&width=450">
                        <i class="icon-edit"></i>编 辑</a>

                </td>
                <td>
                    <a class="btn mini btn-xs blue" title='转正式楼盘' href="@Url.Action("ToProject", new { chValue = chValue })">
                        <i class="icon-share"></i>转正式楼盘</a>
                </td>
            </tr>
            }
        }
    </tbody>
</table>
<div class="pager">
    @{
        var totalPageCount = Model == null ? 0 : Model.TotalPageCount;
        var totalItemCount = Model == null ? 0 : Model.TotalItemCount;
        var currentPageIndex = Model == null ? 0 : Model.CurrentPageIndex;
    }
    <div>共 @totalPageCount 页 @totalItemCount 条记录,当前为第 @currentPageIndex 页</div>
    @if (Model != null && Model.Any())
    {
        @Html.Pager(Model, new PagerOptions { AutoHide = false, ShowPageIndexBox = true, PageIndexBoxType = PageIndexBoxType.TextBox })
    }

</div>

@if (Request.IsAjaxRequest())
{
    <script type="text/javascript">
        //重新触发thickbox
        //tb_init('a.thickbox');
        //checkbox
        $(":checkbox").uniform();
        $("#checkall").click(function () {
            var ischecked = this.checked;
            $("input:checkbox[name='ids']").each(function () {
                this.checked = ischecked;
            });

            $.uniform.update(':checkbox');
        });

    </script>
}

